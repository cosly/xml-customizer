name = "xml-customizer-api"
main = "src/index.ts"
compatibility_date = "2024-05-01"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "xml-customizer-db"
database_id = "b25b0b22-f8e5-47f2-8dda-ddb429d223fb"

# R2 Bucket for XML storage
[[r2_buckets]]
binding = "R2"
bucket_name = "xml-customizer-feeds"

# KV for caching
[[kv_namespaces]]
binding = "KV"
id = "4a9874c88031497dbfea85f916cbb8ca"

[vars]
ADMIN_API_KEY = "change-this-in-production"
CORS_ORIGIN = "https://tools.tesorohq.io"
EMAIL_FROM = "XML Customizer <noreply@yourdomain.com>"

# Note: Set RESEND_API_KEY as a secret using:
# wrangler secret put RESEND_API_KEY

# Cron triggers for scheduled tasks
# Runs 4x per day (every 6 hours) to check feeds for updates
[triggers]
crons = ["0 */6 * * *"]
